# Что такое tmsSign

**tmsSign** - небольшая JavaScript библиотека, позволяющая реализовывать каскадные изменения в интерфейсах сайта. 
Интерфейс страницы состоит, как правило, из различных (независимых) блоков, контентное содержание которых может зависеть от одних и тех же параметров. 
При этом каждый  из блоков должен постоянно мониторить изменение исходных параметров, тем самым создавая лишнюю нагрузку на процессор.

tmsSign создана для того, чтобы упростить решение подобных задач. Центральными понятиями являются Сигналы и Слоты. 
**Сигнал** - уникальная именованная сущность, олицетворяющая некоторое событие, при возникновении которых совокупность интерфейсных блоков страницы должна соответствующим образом видоизмениться. Данные блоки "подписываются" на сигналы за счет Слотов сигнала. 
**Слот** - именованный атрибут сигнала. Каждому слоту соответствует некоторое действие, которое требуется выполнить.

У одного сигнала может быть неограниченное количество слотов. По сути, подписываясь, мы добавляем сигналу ссылку на метод, который требуется вызвать.

tmsSign реализована в виде синглтона. 
` tmsSign.getInstance()`

Библиотека предусматривает два механизма работы с сигналами.

* настройка сигналов на базе конфига
* динамическая настройка поведения

## Методы по работе с сигналами
- appendSignall(params) - Добавляет информацию о сигналах на базе конфига
- getSignall(signal_id) - Возвращает объект сигнала
- getSignallPosition(signal_id) - Возвращает пизицию сигнала в обзем списке или False
- removeSignall(signal_id) - Удаляет требуемый сигнал
- execute(signal_id) - Выполняет сигнал

## Методы по работе со слотами
- setSlot(id, action) - Добавляет информацию о слоте
- getSlot(signal_id) - Возвращает объект сдота
- getSlotPosition(signal_id) - Возвращает пизицию слота в обзем списке или False
- removeSlot(signal_id) - Удаляет требуемый сигнал
- getId() - возвращает id слота
- setId(id) - задает id слота
- execute() - выполняет действие слота

## Настройка сигналов на базе конфига

```javascript
// описание сигнала new_message, срабатывающего при получении письма
new_message_data = {
    id: 'new_message'
    , slots: [
        {
            id: 'red_text', action: makeRed
        }
        , {
            id: 'refresh_new_num', action: refreshUnreaded
        }
    ]
}

tmsSign.getInstance().appendSignall(new_message_data); // инициализируем сигналл
```

В данном примере создан сигнал new_message, у которого есть 2 слота red_text и refresh_new_num. 
Соответственно при возникновении сигнала будут выполнены действия makeRed() и refreshUnreaded().

## Динамическая настройка поведения

```javascript
// Для сигнала new_message можно динамически добавить слот с обработчиком
// Получаем сигналл new_message
var new_message_signal = tmsSign.getInstance().getSignall('new_message');

// Добавляем новый слот
if(new_message_signal){
    new_message_signal.setSlot('disable_btnGetNew', function(){
        $('#btnGetNew').prop('disabled',true);
    })
}
```

В данном случае new_message_signal - объект, описывающий сигнал new_message. Данному сигналу добавили слот disable_btnGetNew c соответствующим действием.

## Вызов сигнала

Для того, чтобы вызвать сигнал достаточно выполнить следующую строчку кода

```javascript
tmsSign.getInstance().execute('new_message'); // иннициируем сигналл
```
